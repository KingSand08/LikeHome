// To get the middle ware started, you must first navigate to the like home folder
// In this folder, open a terminal and run "npx prisma generate"
// Following this, make sure prisma is up to date with the DB by running "npx prisma db pull" *only run this once or it will say smt about Re-Introspection
// To check if the DB is linked and working run "npx prisma studio" (it will display the database)

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["mongoDb"]
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id               String        @id @default(auto()) @map("_id") @db.ObjectId
  email            String        @unique
  name             String
  rewardPoints     Int
  reservations     Reservation[]
}

model Reservation {
  id               String          @id @default(auto()) @map("_id") @db.ObjectId
  bookingId        String          @unique
  userEmail        String
  user             User            @relation(fields: [userEmail], references: [email])
  checkin_date     String
  checkout_date    String
  adults_number    Int
  numDays          Int
  hotel_id         String
  room_id          String
  payment_info     PaymentInfo
  transaction_info TransactionInfo
  verified         Boolean
  room_cost        Float
}

type PaymentInfo {
  firstName      String
  lastName       String
  billingAddress String
  city           String
  state          String
  zipCode        String
  email          String
}

type TransactionInfo {
  dateCreated     String
  stripePaymentId String
}
